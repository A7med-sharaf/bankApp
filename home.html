<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>homeUser</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link rel="stylesheet" href="./css/style.css">
</head>
<style>

    .banner-image{
        background-image: url(img/pexels-eberhard-grossgasteiger-629162.jpg);
        height: 50vh;
        background-size: cover;
    }
</style>
<body>
    <nav class="navbar navbar-expand-md navbar-dark fixed-top">
        <div class="d-flex align-items-center justif-content-center  gap-3" style="margin-left: 15px;">
            <span class="Lout"  onclick="logout()"><i class="fa-solid fa-right-from-bracket "></i></span>
           <a href="#" class="navbar-brand display-5 fw-bold"> <div class="theme-text">Bank </div> </a>
        </div>
        <div class="container">
            
                <!-- <button class="navbar-toggler" data-bs-target="#cnav" data-bs-toggle="collapse">
                    <span class="navbar-toggler-icon"></span>
                </button> -->
                <!-- <div class="collapse navbar-collapse" id="cnav">
               <ul class="navbar-nav text-center ms-auto">
                <li class="navbar-item"><a href="#" class="nav-link"> Home</a></li>
                <li class="navbar-item"><a href="#" class="nav-link"> Services </a></li>
                <li class="navbar-item"><a href="#" class="nav-link"> Contect us </a></li>
                <li class="navbar-item"><a href="#" class="nav-link"> About </a></li>
                
               </ul>
            </div> -->
        </div>
        </nav>


        <div id="carouselExampleIndicators" class="carousel slide  col-12   m-auto">
            <div class="carousel-indicators">
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
            </div>
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img src="./img/photo-1501167786227-4cba60f6d58f.jpg" height="610px" class="d-block w-100" alt="...">
              </div>
              <div class="carousel-item">
                <img src="./img/pexels-jonathanborba-13807424.jpg" height="610px" class="d-block w-100" alt="...">
              </div>
              <div class="carousel-item">
                <img src="./img/pexels-julio-lopez-75309646-29502367.jpg" height="610px" class="d-block w-100" alt="...">
              </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>



          <div class="col-xs-12 col-12 col-sm-6 col-md-3   container card d-flex gap-2 p-2" style="margin-top: 10rem; width: 25rem;">
            <h3>your blance is :<b>0</b></h3>
            <input class="form-control" id="inputval" type="number" placeholder="inter the Amount">
            <div class="d-flex gap-2 justify-content-center">
            <button class="btn btn-success" onclick="depost()">Depost</button>
            <button class="btn btn-danger" onclick="withdrow()">withdrow</button>
            </div>
        </div>
    
    
        <table class="container table table-bordered mt-5">
            <thead>
                <tr>
                    <th>-</th>
                    <th>Befor-blance</th>
                    <th>Lot type</th>
                    <th>Lot value</th>
                    <th>After blance</th>
                    <th>---</th>
                    
                </tr>
            </thead>
            <tbody>
    
            </tbody>
    
        </table>


<!-- 
        <div class="banner-image v-100 vh-100 d-flex justify-content-center align-items-center">
            <div class="content ">
                <h1 class="text-white"> Do this...<i class="fa-solid fa-question"></i> </h1>
            </div>
        </div> -->

        <script >
            let Lout= document.querySelector('.Lout');
            
        function logout(){
            window.location.href="index.html"

        }
            let nav= document.querySelector('nav');
            window.addEventListener('scroll', function () {
    
                if(window.pageYOffset > 100){
                    nav.classList.add('bg-dark','shadow');
                    Lout.style.color="white"
                    
                }
                else{
                    
                    Lout.style.color="black"
                    nav.classList.remove('bg-dark','shadow');
                }
            });


            
let blanceshow = document.querySelector("b");
let inputval = document.querySelector("#inputval");
let table = document.querySelector("table tbody");

let blance = JSON.parse(localStorage.getItem("blance")) || 2000;
let objdata = JSON.parse(localStorage.getItem("DATA")) || [];

function renderobjet() {
    table.innerHTML = "";
    objdata.forEach((el, index) => {
        table.innerHTML += ` 
        <tr>
            <td>${index + 1}</td>
            <td>${el.beforblance}</td>
            <td>${el.LogType}</td>
            <td>${el.Logvalue}</td>
            <td>${el.afterblance}</td>
            <td class="d-flex flex-column ">
                <button class="btn btn-warning" onclick="editRow(${index})">Edit</button> 
                <button class="btn btn-danger" onclick="deleteRow(${index},${el.beforblance})">Del</button>
            </td>
        </tr>
        `;
    });
}

renderobjet();

function show(blance) {
    localStorage.setItem("blance", blance);
    blanceshow.innerHTML = blance;
}

show(blance);

function depost() {
    let Fblance = blance;
    blance = blance + +inputval.value;
    show(blance);

    let obj = {
        beforblance: Fblance,
        LogType: "depost",
        Logvalue: inputval.value,
        afterblance: blance
    };

    objdata.push(obj);
    localStorage.setItem("DATA", JSON.stringify(objdata));
    renderobjet();
    inputval.value = "";
}

function deleteRow(del, beforblance) {
    blance = beforblance;
    objdata.splice(del, 1);
    renderobjet();
    show(blance);
    localStorage.setItem("DATA", JSON.stringify(objdata));
}

function withdrow() {
    let Fblance = blance;
    let keybortinput = inputval.value;
    if (keybortinput > blance) {
        alert(`The number ${keybortinput} is higher than balance: ${blance}`);
    } else {
        blance = blance - +inputval.value;
        let obj = {
            beforblance: Fblance,
            LogType: "withdraw",
            Logvalue: inputval.value,
            afterblance: blance
        };

        objdata.push(obj);
        show(blance);
        localStorage.setItem("DATA", JSON.stringify(objdata));
    }
    renderobjet();
    inputval.value = "";
}

function editRow(index) {
    let newValue = prompt("Enter new value:", objdata[index].Logvalue);
    if (newValue !== null && newValue.trim() !== "") {
        let oldValue = objdata[index].Logvalue;
        let difference = objdata[index].LogType === "depost" ? newValue - oldValue : oldValue - newValue;
        
        objdata[index].Logvalue = newValue;
        objdata[index].afterblance = objdata[index].LogType === "depost" 
            ? parseFloat(objdata[index].afterblance) + difference 
            : parseFloat(objdata[index].afterblance) - difference;

        show(objdata[objdata.length - 1].afterblance);
        localStorage.setItem("DATA", JSON.stringify(objdata));
        renderobjet();
    }
}

        








        </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
    
    

</body>

</html>